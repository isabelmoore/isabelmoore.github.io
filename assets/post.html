<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="img/IM-Photoroom.png" type="image/png">

    <!--==================== UNICONS ====================-->
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">

    <!--==================== CSS ====================-->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/blog_styles.css">
    <link rel="stylesheet" href="css/responsive.css">

    <!--==================== Code Formatting ================-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>

    <title>Blog Post</title>

    <style>
        /* Post Specific Overrides */
        /* Center content layout */
        /* Center content layout */
        .blog__layout-post {
            max-width: 800px;
            margin: 0 auto !important;
            padding: 0 1.5rem !important;
            width: 100%;
        }

        /* "Off-color" background for code blocks */
        /* Using a derived color from the theme variables */
        :root {
            --code-bg-light: #f5f0ed;
            /* Light mode off-white/brownish */
            --code-bg-dark: #2a221f;
            /* Dark mode off-background */
        }

        body.dark-theme {
            --code-bg: var(--code-bg-dark);
        }

        body:not(.dark-theme) {
            --code-bg: var(--code-bg-light);
        }

        /* Override highlight.js background and text color */
        pre code.hljs {
            background-color: var(--code-bg) !important;
            color: var(--text-color) !important;
            /* Use theme text color */
            padding: 1.5rem;
            border-radius: 0.75rem;
            margin: 1.5rem auto;
            font-family: 'Fira Code', 'Consolas', 'Monaco', 'Courier New', monospace;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            display: block;
            overflow-x: auto;
        }

        /* Ensure specific code tokens are visible in dark mode if needed
           This might need more specific overrides depending on the hljs theme, 
           but setting the base color helps. 
           For better dark mode support, we might want to swap the hljs stylesheet based on theme,
           but for now, let's try to adjust the base contrast or use a neutral theme.
        */
        body.dark-theme pre code.hljs {
            color: #e0e0e0 !important;
        }

        /* Back to Blog Button Animation */
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--first-color);
            font-weight: 500;
            margin-bottom: 2rem;
            transition: transform 0.3s ease, color 0.3s ease;
        }

        .back-link:hover {
            transform: translateX(-5px);
            /* Soft move left */
            color: var(--first-color-alt);
        }

        .blog__content-text img {
            display: block;
            max-width: 90%;
            margin: 1.5rem auto;
            border-radius: 0.75rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        /* Headers in post content */
        .blog__content-text h2 {
            margin-top: 3rem;
            margin-bottom: 1.25rem;
            font-size: 1.5rem;
            color: var(--title-color);
            padding-top: 1rem;
            border-top: 1px solid rgba(0, 0, 0, 0.08);
        }

        .blog__content-text h2:first-child {
            margin-top: 0;
            padding-top: 0;
            border-top: none;
        }

        .blog__content-text h3 {
            margin-top: 2rem;
            margin-bottom: 0.75rem;
            font-size: 1.25rem;
            color: var(--title-color);
        }

        .blog__content-text p {
            margin-bottom: 1.25rem;
            line-height: 1.8;
        }

        /* Restore bullet points for lists in blog posts */
        .blog__content-text ul {
            list-style: disc;
            margin-left: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .blog__content-text ol {
            list-style: decimal;
            margin-left: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .blog__content-text li {
            margin-bottom: 0.5rem;
        }

        /* Prevent MathJax overflow on mobile */
        mjx-container[display="true"] {
            overflow-x: auto;
            overflow-y: hidden;
            max-width: 100%;
            padding: 0.5rem 0;
        }

        /* Custom thin scrollbar for math equations */
        mjx-container[display="true"]::-webkit-scrollbar {
            height: 4px;
        }

        mjx-container[display="true"]::-webkit-scrollbar-track {
            background: transparent;
        }

        mjx-container[display="true"]::-webkit-scrollbar-thumb {
            background-color: transparent;
            border-radius: 4px;
        }

        mjx-container[display="true"]:hover::-webkit-scrollbar-thumb,
        mjx-container[display="true"]:active::-webkit-scrollbar-thumb {
            background-color: var(--scroll-thumb-color);
        }

        mjx-container[display="true"]::-webkit-scrollbar-thumb:hover {
            background-color: var(--text-color);
        }

        /* Table Styling for Blog Posts */
        .blog__content-text table {
            width: 100%;
            max-width: 100%;
            table-layout: fixed;
            border-collapse: separate;
            border-spacing: 0;
            margin: 2rem auto;
            overflow: hidden;
            border-radius: 0.75rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            font-size: 0.9rem;
        }

        .blog__content-text th,
        .blog__content-text td {
            padding: 0.6rem 0.75rem;
            border: none;
            border-bottom: 1px solid rgba(0, 0, 0, 0.15);
            text-align: left;
            word-wrap: break-word;
        }

        .blog__content-text th {
            background-color: var(--first-color-lighter);
            color: var(--title-color);
            font-weight: 600;
        }

        .blog__content-text td {
            background-color: var(--code-bg);
        }

        .blog__content-text tr:last-child td {
            border-bottom: none;
        }

        .blog__content-text tr:nth-child(even) td {
            background-color: hsl(var(--hue-color), 30%, 92%);
        }

        /* Dark mode adjustments for tables */
        body.dark-theme .blog__content-text table {
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.4);
        }

        body.dark-theme .blog__content-text th {
            background-color: hsl(var(--hue-color), 30%, 25%);
            color: #f5f5f5;
        }

        body.dark-theme .blog__content-text td {
            background-color: hsl(var(--hue-color), 15%, 18%);
            color: #e0e0e0;
        }

        body.dark-theme .blog__content-text th,
        body.dark-theme .blog__content-text td {
            border-bottom-color: rgba(255, 255, 255, 0.1);
        }

        body.dark-theme .blog__content-text tr:nth-child(even) td {
            background-color: hsl(var(--hue-color), 15%, 15%);
        }
    </style>
</head>

<body>
    <!--==================== PARALLAX BACKGROUND ====================-->
    <div class="parallax-bg">
        <!-- Layer 1: Furthest (Hidden) -->
        <div class="parallax-layer" data-speed="0.1">
            <svg class="mountain-svg" viewBox="0 0 1440 2000" preserveAspectRatio="xMidYMin slice"
                xmlns="http://www.w3.org/2000/svg">
                <path fill-opacity="1" d="M0,120 C 480,20 960,220 1440,120 L 1440,1950 C 960,1850 480,2050 0,1950 Z">
                </path>
            </svg>
        </div>
        <!-- Layer 2: Middle -->
        <div class="parallax-layer" data-speed="0.2">
            <svg class="mountain-svg" viewBox="0 0 1440 2000" preserveAspectRatio="xMidYMin slice"
                xmlns="http://www.w3.org/2000/svg">
                <path fill-opacity="1"
                    d="M0,200 C 300,200 600,500 900,300 C 1200,100 1300,400 1440,300 L 1440,1600 C 1300,1500 1200,1800 900,1600 C 600,1400 300,1700 0,1600 Z">
                </path>
            </svg>
        </div>
        <!-- Layer 3: Closest -->
        <div class="parallax-layer" data-speed="0.5">
            <svg class="mountain-svg" viewBox="0 0 1440 2000" preserveAspectRatio="xMidYMin slice"
                xmlns="http://www.w3.org/2000/svg">
                <path fill-opacity="1"
                    d="M0,900 C 250,700 500,1000 750,850 C 1000,700 1250,950 1440,850 L 1440,1600 C 1250,1500 1000,1750 750,1600 C 500,1450 250,1750 0,1600 Z">
                </path>
            </svg>
        </div>
    </div>

    <!--==================== HEADER ====================-->
    <header class="header" id="header">
        <nav class="nav container">
            <a href="../index.html" class="nav__logo">Isabel</a>
            <div class="nav__menu" id="nav-menu">
                <ul class="nav__list grid">
                    <li class="nav__item">
                        <a href="../index.html#home" class="nav__link">
                            <i class="uil uil-estate nav__icon"></i> Home
                        </a>
                    </li>
                    <li class="nav__item">
                        <a href="../index.html#about" class="nav__link">
                            <i class="uil uil-user nav__icon"></i> About
                        </a>
                    </li>
                    <li class="nav__item">
                        <a href="../index.html#expertise" class="nav__link">
                            <i class="uil uil-briefcase-alt nav__icon"></i> Expertise
                        </a>
                    </li>
                    <li class="nav__item">
                        <a href="../index.html#portfolio" class="nav__link">
                            <i class="uil uil-scenery nav__icon"></i> Portfolio
                        </a>
                    </li>
                    <li class="nav__item">
                        <a href="../index.html#contact" class="nav__link">
                            <i class="uil uil-message nav__icon"></i> Contact Me
                        </a>
                    </li>
                    <li class="nav__item">
                        <a href="blog.html" class="nav__link active-link">
                            <i class="uil uil-edit nav__icon"></i> Blog
                        </a>
                    </li>
                </ul>
                <i class="uil uil-times nav__close" id="nav-close"></i>
            </div>
            <div class="nav__btns">
                <i class="uil uil-moon change-theme" id="theme-button"></i>
                <div class="nav__toggle" id="nav-toggle">
                    <i class="uil uil-apps"></i>
                </div>
            </div>
        </nav>
    </header>

    <!--==================== MAIN ====================-->
    <main class="main">
        <section class="blog section" id="blog">
            <div class="container blog__layout-post">
                <!-- No Sidebar, just main content centered -->
                <div class="blog__main">
                    <!-- Post Header -->
                    <a href="blog.html" class="back-link">
                        <i class="uil uil-arrow-left"></i> Back to Blog
                    </a>
                    <h1 id="post-title" class="blog__post-title">Loading...</h1>

                    <div class="blog__meta" style="margin-bottom: 2rem;">
                        <span class="blog__meta-item" id="post-read-time"><i class="uil uil-clock"></i> </span>
                        <span class="blog__meta-item" id="post-date"><i class="uil uil-calendar-alt"></i> </span>
                    </div>

                    <!-- Tags (Moved Top) -->
                    <div id="post-tags" class="blog__tags" style="margin-bottom: 2rem;"></div>

                    <!-- Share Buttons (Moved Top, Icons Only) -->


                    <!-- Post Description -->
                    <p id="post-description" class="blog__description"
                        style="font-size: 1.1rem; margin-bottom: 2rem; font-style: italic; opacity: 0.9;"></p>

                    <hr style="margin: 2rem 0; border: 0; border-top: 1px solid var(--text-color); opacity: 0.5;">

                    <!-- Post Content -->
                    <div id="post-content" class="blog__content-text">
                        <!-- Content loaded dynamically -->
                    </div>

                    <hr style="margin: 2rem 0; border: 0; border-top: 1px solid var(--text-color); opacity: 0.5;">

                    <!-- Share Buttons (Bottom) -->
                    <div class="blog__share"
                        style="margin-bottom: 3rem; display: flex; align-items: center; gap: 1rem;">
                        <span style="font-weight: 600; margin-right: 0.5rem;">SHARE ON</span>
                        <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://isabelmoore.github.io"
                            target="_blank" class="button button--small"
                            style="background-color: #0077b5; width: 40px; height: 40px; padding: 0; display: flex; justify-content: center; align-items: center; border-radius: 8px;"
                            title="Share on LinkedIn"><i class="uil uil-linkedin"
                                style="font-size: 1.5rem; margin: 0;"></i></a>

                        <a href="https://twitter.com/intent/tweet?url=https://isabelmoore.github.io&text=Check%20out%20Isabel%20Moore's%20portfolio!"
                            target="_blank" class="button button--small"
                            style="background-color: #1DA1F2; width: 40px; height: 40px; padding: 0; display: flex; justify-content: center; align-items: center; border-radius: 8px;"
                            title="Share on Twitter"><i class="uil uil-twitter"
                                style="font-size: 1.5rem; margin: 0;"></i></a>

                        <a href="mailto:?subject=Check%20out%20Isabel%20Moore's%20Portfolio&body=I%20thought%20you%20might%20like%20this:%20https://isabelmoore.github.io"
                            class="button button--small"
                            style="background-color: #EA4335; width: 40px; height: 40px; padding: 0; display: flex; justify-content: center; align-items: center; border-radius: 8px;"
                            title="Share via Email"><i class="uil uil-envelope"
                                style="font-size: 1.5rem; margin: 0;"></i></a>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!--==================== FOOTER ====================-->
    <footer class="footer">
        <div class="footer__bg">
            <div class="footer__container container grid">
                <div>
                    <h1 class="footer__title">Isabel</h1>
                    <span class="footer__subtitle">Thank you for visiting my website.</span>
                </div>
                <ul class="footer__links">
                    <li>
                        <a href="../index.html#expertise" class="footer__link">Expertise</a>
                    </li>
                    <li>
                        <a href="../index.html#portfolio" class="footer__link">Portfolio</a>
                    </li>
                    <li>
                        <a href="../index.html#contact" class="footer__link">Contact Me</a>
                    </li>
                </ul>
                <!-- <div class="footer__socials">
                    <a href="https://www.linkedin.com/in/isabel-moore/" aria-label="footer__social" target="_blank"
                        class="footer__social">
                        <i class="uil uil-linkedin-alt"></i>
                    </a>
                </div> -->
            </div>
            <p class="footer__copy">&#169; isabelmoore.github. All right reserved</p>
        </div>
    </footer>

    <!--==================== MAIN JS ====================-->
    <script src="js/main.js"></script>
    <script src="js/blog-data.js?v=3"></script>

    <!--==================== Markdown Support ====================-->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!--==================== MathJax Support ====================-->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const params = new URLSearchParams(window.location.search);
            const fileName = params.get("file");

            if (!fileName) {
                document.getElementById("post-content").innerHTML = "<p>No post specified.</p>";
                return;
            }

            // Find post data
            const post = blogPosts.find(p => p.file === fileName || p.file.endsWith(fileName));

            if (post) {
                document.title = post.title + " - Isabel Moore";
                document.getElementById("post-title").textContent = post.title;
                document.getElementById("post-read-time").innerHTML = `<i class="uil uil-clock"></i> ${post.readTime || '5 min read'}`;

                const dateObj = new Date(post.date + 'T12:00:00');
                const dateStr = dateObj.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
                document.getElementById("post-date").innerHTML = `<i class="uil uil-calendar-alt"></i> Published: ${dateStr}`;

                if (post.description) {
                    document.getElementById("post-description").textContent = post.description;
                }

                if (post.tags) {
                    document.getElementById("post-tags").innerHTML = post.tags.map(tag => `<span class="blog__tag">${tag}</span>`).join('');
                }
            }

            // Fetch Content
            fetch(fileName)
                .then(response => {
                    if (!response.ok) throw new Error("Failed to load content");
                    return response.text();
                })
                .then(async text => {
                    const postContentEl = document.getElementById("post-content");

                    if (fileName.endsWith('.md')) {
                        // Protect MathJax from Marked.js
                        // Use alphanumeric placeholders to avoid Markdown formatting (underscores/asterisks)
                        const mathBlocks = [];
                        let protectedText = text.replace(/\$\$([\s\S]*?)\$\$/g, (match) => {
                            mathBlocks.push(match);
                            return `MATHBLOCKPLACEHOLDER${mathBlocks.length - 1}ENDMATHBLOCK`;
                        }).replace(/\$([^\$\n]+?)\$/g, (match) => {
                            mathBlocks.push(match);
                            return `MATHINLINEPLACEHOLDER${mathBlocks.length - 1}ENDMATHINLINE`;
                        });

                        // Render Markdown
                        let html = marked.parse(protectedText);

                        // Restore MathJax
                        html = html.replace(/MATHBLOCKPLACEHOLDER(\d+)ENDMATHBLOCK/g, (match, index) => {
                            return mathBlocks[parseInt(index)];
                        }).replace(/MATHINLINEPLACEHOLDER(\d+)ENDMATHINLINE/g, (match, index) => {
                            return mathBlocks[parseInt(index)];
                        });

                        postContentEl.innerHTML = html;
                    } else {
                        // Render HTML
                        postContentEl.innerHTML = text;
                    }

                    // Highlight Code
                    hljs.highlightAll();

                    // Render Math (Safely check if MathJax is ready)
                    if (window.MathJax && window.MathJax.typesetPromise) {
                        try {
                            await MathJax.typesetPromise([postContentEl]);
                        } catch (err) {
                            console.log('MathJax error:', err);
                            // Retry once if needed or ignore
                        }
                    } else if (window.MathJax) {
                        // Fallback if typesetPromise isn't ready yet (shouldn't happen with async, but good for safety)
                        window.MathJax.startup.promise.then(() => {
                            MathJax.typesetPromise([postContentEl]);
                        });
                    }
                })
                .catch(err => {
                    document.getElementById("post-content").innerHTML = `<p>Error loading post: ${err.message}</p>`;
                });
        });
    </script>
</body>

</html>